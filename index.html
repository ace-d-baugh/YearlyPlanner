<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Couples Planning Toolkit</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    /* Sticky Navigation */
    .sticky-nav {
      position: sticky;
      top: 0;
      background: white;
      border-bottom: 3px solid #667eea;
      padding: 15px 20px;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .progress-container {
      margin-bottom: 10px;
    }

    .progress-bar-bg {
      width: 100%;
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      transition: width 0.3s ease;
      width: 0%;
    }

    .progress-text {
      display: block;
      font-size: 13px;
      color: #666;
      margin-top: 5px;
    }

    .nav-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .nav-buttons button {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      background: #667eea;
      color: white;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }

    .nav-buttons button:hover {
      background: #764ba2;
      transform: translateY(-2px);
    }

    .last-saved {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
    }

    /* Main Content */
    main {
      padding: 40px;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
      padding-bottom: 30px;
      border-bottom: 2px solid #f0f0f0;
    }

    header h1 {
      font-size: 36px;
      color: #667eea;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 18px;
      color: #666;
    }

    /* Sections */
    .section {
      margin-bottom: 50px;
    }

    .section h2 {
      font-size: 28px;
      color: #333;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #667eea;
    }

    .section h3 {
      font-size: 22px;
      color: #555;
      margin: 30px 0 15px 0;
    }

    .domain-intro {
      background: #f8f9ff;
      padding: 15px;
      border-left: 4px solid #667eea;
      margin-bottom: 25px;
      font-style: italic;
      color: #555;
    }

    /* Questions */
    .question {
      margin-bottom: 30px;
      padding: 20px;
      background: #fafafa;
      border-radius: 8px;
      border-left: 4px solid #ddd;
    }

    .question.mandatory {
      border-left-color: #e53e3e;
      background: #fff5f5;
    }

    .question.nice-to-have {
      border-left-color: #48bb78;
      background: #f0fff4;
    }

    .question label {
      display: block;
      font-weight: 500;
      margin-bottom: 10px;
      color: #333;
    }

    .label-tag {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: bold;
      margin-right: 8px;
    }

    .label-tag.mandatory {
      background: #e53e3e;
      color: white;
    }

    .label-tag.nice-to-have {
      background: #48bb78;
      color: white;
    }

    /* Form Inputs */
    input[type="text"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      padding: 10px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      font-size: 15px;
      font-family: inherit;
      transition: border-color 0.3s;
    }

    input[type="text"]:focus,
    input[type="number"]:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: #667eea;
    }

    textarea {
      min-height: 100px;
      resize: vertical;
    }

    /* Range Slider */
    .range-container {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    input[type="range"] {
      flex: 1;
      height: 8px;
      border-radius: 4px;
      background: #e0e0e0;
      outline: none;
      -webkit-appearance: none;
      appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #667eea;
      cursor: pointer;
    }

    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #667eea;
      cursor: pointer;
      border: none;
    }

    .range-value {
      font-weight: bold;
      color: #667eea;
      min-width: 40px;
      text-align: center;
      font-size: 18px;
    }

    .range-labels {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #999;
      margin-top: 5px;
    }

    /* Radio buttons and checkboxes */
    .radio-group,
    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .radio-group label,
    .checkbox-group label {
      display: flex;
      align-items: center;
      font-weight: normal;
      cursor: pointer;
    }

    .radio-group input[type="radio"],
    .checkbox-group input[type="checkbox"] {
      margin-right: 10px;
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    /* Percentage inputs */
    .percentage-group {
      display: grid;
      gap: 15px;
    }

    .percentage-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .percentage-item label {
      flex: 1;
      margin: 0;
    }

    .percentage-item input {
      width: 80px;
    }

    .percentage-error {
      color: #e53e3e;
      font-size: 14px;
      margin-top: 10px;
      display: none;
    }

    /* Navigation between sections */
    .section-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid #f0f0f0;
    }

    .section-nav button {
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-prev {
      background: #e0e0e0;
      color: #333;
    }

    .btn-prev:hover {
      background: #d0d0d0;
    }

    .btn-next {
      background: #667eea;
      color: white;
    }

    .btn-next:hover {
      background: #764ba2;
    }

    /* Partner prediction note */
    .prediction-note {
      background: #fff3cd;
      border: 2px solid #ffc107;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 15px;
      font-size: 14px;
      color: #856404;
    }

    /* Print styles */
    @media print {
      body {
        background: white;
        padding: 0;
      }

      .sticky-nav,
      .nav-buttons,
      .section-nav,
      .no-print {
        display: none !important;
      }

      .container {
        box-shadow: none;
      }

      .section {
        page-break-inside: avoid;
      }

      input, textarea, select {
        border: none;
        border-bottom: 1px solid #000;
        background: transparent;
      }
    }

    /* Hidden sections */
    .section.hidden {
      display: none;
    }

    /* Completion screen */
    .completion-screen {
      text-align: center;
      padding: 60px 20px;
    }

    .completion-screen h2 {
      color: #48bb78;
      font-size: 32px;
      margin-bottom: 20px;
    }

    .completion-screen p {
      font-size: 18px;
      color: #666;
      margin-bottom: 30px;
    }

    .completion-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .completion-actions button {
      padding: 15px 30px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-export {
      background: #667eea;
      color: white;
    }

    .btn-export:hover {
      background: #764ba2;
    }

    .btn-print {
      background: #48bb78;
      color: white;
    }

    .btn-print:hover {
      background: #38a169;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Sticky Navigation -->
    <nav class="sticky-nav">
      <div class="progress-container">
        <div class="progress-bar-bg">
          <div class="progress-bar" id="progressBar"></div>
        </div>
        <span class="progress-text" id="progressText">0% Complete</span>
      </div>
      <div class="nav-buttons">
        <button onclick="saveProgress()">üíæ Save Progress</button>
        <button onclick="exportJSON()">üì• Export JSON</button>
        <button onclick="document.getElementById('importFile').click()">üì§ Import JSON</button>
        <button onclick="printFilled()">üñ®Ô∏è Print Filled</button>
        <button onclick="printBlank()">üìÑ Print Blank</button>
      </div>
      <div class="last-saved" id="lastSaved"></div>
      <input type="file" id="importFile" accept=".json" style="display:none" onchange="importJSON(this.files[0])">
    </nav>

    <main>
      <header>
        <h1>Couples Planning Toolkit</h1>
        <p class="subtitle">Annual Planning Session Questionnaire</p>
      </header>

      <form id="planningForm">
        
        <!-- SECTION 1: Instructions -->
        <section id="instructions" class="section">
          <h2>Instructions</h2>
          <div style="background: #f8f9ff; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <h3 style="margin-top: 0;">Welcome to Your Planning Session</h3>
            <p style="margin-bottom: 15px;"><strong>Estimated Time:</strong> 90 minutes</p>
            <p style="margin-bottom: 15px;"><strong>Purpose:</strong> This questionnaire helps you and your partner assess your current state across six life domains and plan for the next 1-5 years. Complete this individually and privately before your joint session.</p>
            
            <h4 style="margin-top: 20px;">Important Guidelines:</h4>
            <ul style="margin-left: 20px; margin-bottom: 15px;">
              <li>Answer honestly - there are no "right" answers</li>
              <li>Complete this alone, without consulting your partner</li>
              <li>Your data stays on your device (no uploads to servers)</li>
              <li>Save frequently using the "Save Progress" button</li>
              <li>Some questions ask you to predict your partner's answer - these help identify blind spots</li>
            </ul>
            
            <h4 style="margin-top: 20px;">Question Labels:</h4>
            <p><span class="label-tag mandatory">M</span> <strong>Mandatory:</strong> Critical alignment areas where disagreement often causes serious conflict</p>
            <p><span class="label-tag nice-to-have">NTH</span> <strong>Nice-to-Have:</strong> Enhancement areas where differences can be complementary</p>
            
            <h4 style="margin-top: 20px;">Best Environment:</h4>
            <ul style="margin-left: 20px;">
              <li>Quiet, comfortable space</li>
              <li>Uninterrupted time</li>
              <li>Have water/snacks nearby</li>
            </ul>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" disabled>‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('snapshot')">Next ‚Üí</button>
          </div>
        </section>

        <!-- SECTION 2: Relationship Snapshot -->
        <section id="snapshot" class="section hidden">
          <h2>Relationship Snapshot</h2>
          
          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Your Name:</label>
            <input type="text" name="partnerName" required>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Years together:</label>
            <input type="number" name="yearsTogether" min="0" required>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Years married:</label>
            <input type="number" name="yearsMarried" min="0" required>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Current living situation:</label>
            <div class="radio-group">
              <label><input type="radio" name="livingSituation" value="own"> Own home</label>
              <label><input type="radio" name="livingSituation" value="rent"> Rent</label>
              <label><input type="radio" name="livingSituation" value="family"> Living with family</label>
              <label><input type="radio" name="livingSituation" value="other"> Other</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Children:</label>
            <div class="radio-group">
              <label><input type="radio" name="hasChildren" value="yes"> Yes</label>
              <label><input type="radio" name="hasChildren" value="no"> No</label>
            </div>
            <input type="text" name="childrenAges" placeholder="If yes, list ages (e.g., 5, 8, 12)" style="margin-top: 10px;">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Planning more children:</label>
            <div class="radio-group">
              <label><input type="radio" name="moreChildren" value="yes"> Yes</label>
              <label><input type="radio" name="moreChildren" value="no"> No</label>
              <label><input type="radio" name="moreChildren" value="uncertain"> Uncertain</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your current overall relationship satisfaction:</label>
            <div class="range-container">
              <input type="range" name="relationshipSatisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Very Dissatisfied</span>
              <span>10 - Very Satisfied</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Major life transitions anticipated in next 5 years:</label>
            <textarea name="lifeTransitions" placeholder="e.g., career changes, relocations, family planning, etc."></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Last time you did structured relationship planning:</label>
            <input type="text" name="lastPlanning" placeholder="e.g., Never, 1 year ago, 3 years ago">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What was the best moment in your relationship in the past year?</label>
            <textarea name="bestMoment"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What was the biggest challenge in your relationship in the past year?</label>
            <textarea name="biggestChallenge"></textarea>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('instructions')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('reflection')">Next ‚Üí</button>
          </div>
        </section>

        <!-- SECTION 3: Prior Year Reflection (Rose, Bud, Thorn) -->
        <section id="reflection" class="section hidden">
          <h2>Prior Year Reflection: Rose, Bud, Thorn</h2>
          
          <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 25px;">
            <strong>This reflection grounds your future planning in recent history.</strong>
          </div>

          <h3>üåπ ROSE - Best Memory</h3>
          
          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What was your favorite memory together from the past year?</label>
            <textarea name="rose_memory"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What made this moment special?</label>
            <textarea name="rose_why"></textarea>
          </div>

          <h3>üå± BUD - Emerging Growth</h3>
          
          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What did we start in the past year that we should continue or expand?</label>
            <textarea name="bud_continue"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What positive change have you noticed in yourself or our relationship?</label>
            <textarea name="bud_change"></textarea>
          </div>

          <h3>ü•Ä THORN - Biggest Struggle</h3>
          
          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What was the hardest challenge we faced in the past year?</label>
            <textarea name="thorn_challenge"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How did we handle it? What could we do differently?</label>
            <textarea name="thorn_handling"></textarea>
          </div>

          <h3>Goal Review</h3>
          
          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What personal goals did you set last year? Which were achieved?</label>
            <textarea name="lastYear_personalGoals"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What couple goals did we set last year? Which were achieved?</label>
            <textarea name="lastYear_coupleGoals"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Why did some goals succeed and others not?</label>
            <textarea name="lastYear_whySuccess"></textarea>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('snapshot')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('domain1')">Next: Domain 1 ‚Üí</button>
          </div>
        </section>

        <!-- DOMAIN 1: Mental & Emotional Well-being -->
        <section id="domain1" class="section hidden">
          <h2>Domain 1: Mental and Emotional Well-being</h2>
          
          <div class="domain-intro">
            This domain covers your emotional health, stress management, mental stimulation, therapy/counseling, anxiety/depression management, life satisfaction, sense of purpose, and emotional fulfillment.
          </div>

          <h3>A. Current State (Individual)</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your current overall mental/emotional well-being:</label>
            <div class="range-container">
              <input type="range" name="mental_wellbeing" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Struggling Significantly</span>
              <span>10 - Thriving</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your current stress level:</label>
            <div class="range-container">
              <input type="range" name="mental_stress" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Very Low Stress</span>
              <span>10 - Overwhelming Stress</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Rate your current life satisfaction:</label>
            <div class="range-container">
              <input type="range" name="mental_satisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Very Dissatisfied</span>
              <span>10 - Very Satisfied</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> How much effort do you currently invest in your mental/emotional health?</label>
            <div class="range-container">
              <input type="range" name="mental_effort" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - No Intentional Effort</span>
              <span>10 - Major Daily Investment</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Do you currently experience symptoms of anxiety or depression that affect your daily life?</label>
            <div class="radio-group">
              <label><input type="radio" name="mental_symptoms" value="treatment"> Yes, currently receiving treatment</label>
              <label><input type="radio" name="mental_symptoms" value="needTreatment"> Yes, not receiving treatment but need to</label>
              <label><input type="radio" name="mental_symptoms" value="manageable"> Occasionally, manageable without treatment</label>
              <label><input type="radio" name="mental_symptoms" value="no"> No</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What are your top 2-3 emotional needs in your life right now?</label>
            <textarea name="mental_needs"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What activities or practices help you feel emotionally balanced?</label>
            <textarea name="mental_practices" placeholder="e.g., therapy, meditation, exercise, creative outlets"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What are the biggest sources of stress in your life currently?</label>
            <textarea name="mental_stressors"></textarea>
          </div>

          <h3>B. Current State (Partner Awareness)</h3>

          <div class="prediction-note">
            üí° The following questions ask you to predict YOUR PARTNER's answers. This helps identify blind spots and differences in perception.
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How satisfied do you think YOUR PARTNER is with their mental/emotional well-being?</label>
            <div class="range-container">
              <input type="range" name="mental_partner_wellbeing" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Struggling</span>
              <span>10 - Thriving</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How stressed do you think YOUR PARTNER currently is?</label>
            <div class="range-container">
              <input type="range" name="mental_partner_stress" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What do you think your partner would say is their biggest emotional stressor?</label>
            <textarea name="mental_partner_stressor"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your current alignment as a couple in supporting each other's emotional needs:</label>
            <div class="range-container">
              <input type="range" name="mental_alignment" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Not Aligned</span>
              <span>10 - Very Aligned</span>
            </div>
          </div>

          <h3>C. Future Vision</h3>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What does optimal mental/emotional well-being look like for YOU in 1 year?</label>
            <textarea name="mental_vision_1yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What boundaries or changes would most improve your emotional well-being in the next year?</label>
            <textarea name="mental_boundaries"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> As a couple, what should our approach to managing stress and emotions be in the next 1-5 years?</label>
            <textarea name="mental_couple_approach"></textarea>
          </div>

          <h3>D. Obstacles & Resources</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What would you need from your partner to improve your emotional well-being?</label>
            <textarea name="mental_partner_support"></textarea>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('reflection')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('domain2')">Next: Domain 2 ‚Üí</button>
          </div>
        </section>

        <!-- DOMAIN 2: Physical Health and Fitness -->
        <section id="domain2" class="section hidden">
          <h2>Domain 2: Physical Health and Fitness</h2>
          
          <div class="domain-intro">
            This domain covers exercise, nutrition, sleep, medical care, body image, energy levels, chronic conditions, and overall physical vitality.
          </div>

          <h3>A. Current State (Individual)</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your current overall physical health:</label>
            <div class="range-container">
              <input type="range" name="physical_health" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Poor Health</span>
              <span>10 - Excellent Health</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Rate your current satisfaction with your fitness level:</label>
            <div class="range-container">
              <input type="range" name="physical_fitness_satisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Very Dissatisfied</span>
              <span>10 - Very Satisfied</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> How much effort do you currently invest in physical health/fitness?</label>
            <div class="range-container">
              <input type="range" name="physical_effort" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - No Intentional Effort</span>
              <span>10 - Major Daily Investment</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Do you have any chronic health conditions or concerns?</label>
            <div class="radio-group">
              <label><input type="radio" name="physical_chronic" value="managed"> Yes, being managed</label>
              <label><input type="radio" name="physical_chronic" value="unmanaged"> Yes, need attention but not addressing</label>
              <label><input type="radio" name="physical_chronic" value="no"> No</label>
            </div>
            <textarea name="physical_chronic_details" placeholder="If yes, please describe" style="margin-top: 10px;"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Average hours of sleep per night:</label>
            <input type="number" name="physical_sleep_hours" min="0" max="24" step="0.5" placeholder="e.g., 7.5">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your sleep quality:</label>
            <div class="range-container">
              <input type="range" name="physical_sleep_quality" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Poor/Disrupted</span>
              <span>10 - Excellent/Restorative</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Current exercise frequency:</label>
            <div class="radio-group">
              <label><input type="radio" name="physical_exercise_freq" value="4plus"> 4+ times per week</label>
              <label><input type="radio" name="physical_exercise_freq" value="2to3"> 2-3 times per week</label>
              <label><input type="radio" name="physical_exercise_freq" value="once"> Once per week</label>
              <label><input type="radio" name="physical_exercise_freq" value="rarely"> Rarely/never</label>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What are your primary pain points or frustrations with physical health?</label>
            <textarea name="physical_frustrations"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What are recent wins or progress in physical health?</label>
            <textarea name="physical_wins"></textarea>
          </div>

          <h3>B. Current State (Partner Awareness)</h3>

          <div class="prediction-note">
            üí° Predicting your partner's physical health satisfaction and concerns
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How satisfied do you think YOUR PARTNER is with their physical health?</label>
            <div class="range-container">
              <input type="range" name="physical_partner_health" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What do you think your partner would say is their biggest health frustration?</label>
            <textarea name="physical_partner_frustration"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate how aligned you are as a couple in supporting each other's health goals:</label>
            <div class="range-container">
              <input type="range" name="physical_alignment" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Not Aligned</span>
              <span>10 - Very Aligned</span>
            </div>
          </div>

          <h3>C. Future Vision</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Personal physical health goal (1-Year):</label>
            <textarea name="physical_personal_1yr"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Personal physical health goal (5-Year):</label>
            <textarea name="physical_personal_5yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Couple health/fitness goal (1-Year):</label>
            <textarea name="physical_couple_1yr" placeholder="e.g., cook healthy meals together, train for event, establish active lifestyle"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Couple health/fitness goal (5-Year):</label>
            <textarea name="physical_couple_5yr"></textarea>
          </div>

          <h3>D. Obstacles & Resources</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What support do you need from your partner for your health goals?</label>
            <textarea name="physical_partner_support"></textarea>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('domain1')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('domain3')">Next: Domain 3 ‚Üí</button>
          </div>
        </section>

        <!-- DOMAIN 3: Professional Life and Career -->
        <section id="domain3" class="section hidden">
          <h2>Domain 3: Professional Life and Career</h2>
          
          <div class="domain-intro">
            This domain covers career satisfaction, advancement goals, work-life balance, professional development, income expectations, and potential career changes.
          </div>

          <h3>A. Current State (Individual)</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your current career/professional satisfaction:</label>
            <div class="range-container">
              <input type="range" name="career_satisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Very Dissatisfied</span>
              <span>10 - Very Satisfied</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your current work-life balance:</label>
            <div class="range-container">
              <input type="range" name="career_worklife_balance" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Very Imbalanced</span>
              <span>10 - Excellent Balance</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> How much effort are you investing in career development?</label>
            <div class="range-container">
              <input type="range" name="career_effort" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Average hours worked per week:</label>
            <input type="number" name="career_hours_week" min="0" max="168" placeholder="e.g., 40">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Do you anticipate any major career changes in the next 5 years?</label>
            <div class="radio-group">
              <label><input type="radio" name="career_changes" value="promotion"> Yes - promotion/advancement within current field</label>
              <label><input type="radio" name="career_changes" value="career_change"> Yes - career change/new field</label>
              <label><input type="radio" name="career_changes" value="entrepreneurship"> Yes - considering entrepreneurship/starting business</label>
              <label><input type="radio" name="career_changes" value="leaving"> Yes - considering leaving workforce/retirement</label>
              <label><input type="radio" name="career_changes" value="relocation"> Yes - relocation for career</label>
              <label><input type="radio" name="career_changes" value="no"> No major changes anticipated</label>
              <label><input type="radio" name="career_changes" value="uncertain"> Uncertain</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> If a major career opportunity required relocation, would you want to pursue it?</label>
            <div class="radio-group">
              <label><input type="radio" name="career_relocation" value="yes_definitely"> Yes, definitely</label>
              <label><input type="radio" name="career_relocation" value="yes_if_agree"> Yes, if partner agrees</label>
              <label><input type="radio" name="career_relocation" value="only_if_equal"> Only if partner has equal opportunity there</label>
              <label><input type="radio" name="career_relocation" value="probably_not"> Probably not</label>
              <label><input type="radio" name="career_relocation" value="definitely_not"> Definitely not</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What are your primary career frustrations or pain points?</label>
            <textarea name="career_frustrations"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What are recent career wins or progress?</label>
            <textarea name="career_wins"></textarea>
          </div>

          <h3>B. Current State (Partner Awareness)</h3>

          <div class="prediction-note">
            üí° Predicting your partner's career satisfaction and aspirations
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How satisfied do you think YOUR PARTNER is with their career?</label>
            <div class="range-container">
              <input type="range" name="career_partner_satisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What do you think your partner's biggest career frustration is?</label>
            <textarea name="career_partner_frustration"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate how aligned you are in supporting each other's career goals:</label>
            <div class="range-container">
              <input type="range" name="career_alignment" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <h3>C. Future Vision</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Personal career goal (1-Year):</label>
            <textarea name="career_personal_1yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Personal career goal (5-Year):</label>
            <textarea name="career_personal_5yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How should we balance career ambitions with family/relationship needs in the next 1-5 years?</label>
            <textarea name="career_balance_approach"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> If I achieve my career goals, what might I need to sacrifice or what might we need to accommodate as a couple?</label>
            <textarea name="career_sacrifices"></textarea>
          </div>

          <h3>D. Obstacles & Resources</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What support do you need from your partner for your career goals?</label>
            <textarea name="career_partner_support"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Trade-off question: If achieving your career goal required significantly less family time, would you still pursue it?</label>
            <div class="radio-group">
              <label><input type="radio" name="career_tradeoff" value="yes_priority"> Yes, career is priority</label>
              <label><input type="radio" name="career_tradeoff" value="yes_guilt"> Yes, but with guilt/concern</label>
              <label><input type="radio" name="career_tradeoff" value="only_temp"> Only if temporary</label>
              <label><input type="radio" name="career_tradeoff" value="no"> No, family time is non-negotiable</label>
            </div>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('domain2')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('domain4')">Next: Domain 4 (Financial) ‚Üí</button>
          </div>
        </section>

        <!-- DOMAIN 4: Financial Life (EXTENDED SECTION) -->
        <section id="domain4" class="section hidden">
          <h2>Domain 4: Financial Life and Material Well-being</h2>
          
          <div class="domain-intro">
            This domain covers income, expenses, debt, savings, investments, retirement, financial decision-making, money beliefs, and material lifestyle expectations. <strong>Research shows this is often the most sensitive domain‚Äîplease answer honestly as misalignment here predicts significant relationship conflict.</strong>
          </div>

          <h3>A. Current Financial Reality</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Current combined annual household income (before taxes):</label>
            <input type="number" name="finance_income" placeholder="$" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Total assets (savings, investments, home equity, etc.):</label>
            <input type="number" name="finance_assets" placeholder="$" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Total debts (mortgage, student loans, credit cards, auto, etc.):</label>
            <input type="number" name="finance_debts" placeholder="$" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Monthly essential expenses (housing, utilities, food, insurance, etc.):</label>
            <input type="number" name="finance_essentials" placeholder="$" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Monthly discretionary spending (entertainment, dining out, hobbies, etc.):</label>
            <input type="number" name="finance_discretionary" placeholder="$" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your current financial stress level:</label>
            <div class="range-container">
              <input type="range" name="finance_stress" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - No Financial Stress</span>
              <span>10 - Extreme Financial Stress</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your satisfaction with current financial situation:</label>
            <div class="range-container">
              <input type="range" name="finance_satisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <h3>B. Money Scripts & Background</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What were the primary messages about money you learned growing up?</label>
            <textarea name="finance_childhood_messages"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Describe your parents' relationship with money in 2-3 sentences:</label>
            <textarea name="finance_parents_money"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What's your earliest money memory?</label>
            <textarea name="finance_earliest_memory"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> On a scale of 1-7, rate your comfort with debt:</label>
            <div class="range-container">
              <input type="range" name="finance_debt_comfort" min="1" max="7" value="4" oninput="updateRangeDisplay(this)">
              <span class="range-value">4</span>
            </div>
            <div class="range-labels">
              <span>1 - Debt is dangerous/avoid</span>
              <span>7 - Debt is a tool/embrace</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Complete this sentence: "Money is primarily for..."</label>
            <div class="radio-group">
              <label><input type="radio" name="finance_money_for" value="security"> Security and safety</label>
              <label><input type="radio" name="finance_money_for" value="freedom"> Freedom and experiences</label>
              <label><input type="radio" name="finance_money_for" value="status"> Status and success</label>
              <label><input type="radio" name="finance_money_for" value="generosity"> Generosity and helping others</label>
              <label><input type="radio" name="finance_money_for" value="other"> Other: <input type="text" name="finance_money_for_other" style="display:inline; width:200px;"></label>
            </div>
          </div>

          <h3>C. Decision-Making & Transparency</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> At what dollar amount do you feel you should consult your partner before spending?</label>
            <input type="number" name="finance_consult_amount" placeholder="$" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Partners should have:</label>
            <div class="radio-group">
              <label><input type="radio" name="finance_accounts" value="fully_joint"> Fully joint accounts (all money combined)</label>
              <label><input type="radio" name="finance_accounts" value="mostly_joint"> Mostly joint with small separate "fun money" accounts</label>
              <label><input type="radio" name="finance_accounts" value="separate_joint_bills"> Separate accounts with joint account for bills</label>
              <label><input type="radio" name="finance_accounts" value="fully_separate"> Fully separate accounts</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How much financial privacy should partners have?</label>
            <div class="range-container">
              <input type="range" name="finance_privacy" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Complete Transparency</span>
              <span>10 - Significant Privacy is Healthy</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Have you ever hidden a purchase or debt from your partner?</label>
            <div class="radio-group">
              <label><input type="radio" name="finance_hidden" value="yes"> Yes</label>
              <label><input type="radio" name="finance_hidden" value="no"> No</label>
              <label><input type="radio" name="finance_hidden" value="prefer_not"> Prefer not to answer</label>
            </div>
            <textarea name="finance_hidden_explain" placeholder="Optional explanation" style="margin-top: 10px;"></textarea>
          </div>

          <h3>D. Risk Tolerance & Investment Philosophy</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your investment risk tolerance:</label>
            <div class="range-container">
              <input type="range" name="finance_risk_tolerance" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Very Conservative</span>
              <span>10 - Very Aggressive</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What percentage of investments should be in: (must total 100%)</label>
            <div class="percentage-group">
              <div class="percentage-item">
                <label>Stocks:</label>
                <input type="number" name="finance_invest_stocks" min="0" max="100" value="0" oninput="validatePercentages('finance_invest')">%
              </div>
              <div class="percentage-item">
                <label>Bonds:</label>
                <input type="number" name="finance_invest_bonds" min="0" max="100" value="0" oninput="validatePercentages('finance_invest')">%
              </div>
              <div class="percentage-item">
                <label>Real Estate:</label>
                <input type="number" name="finance_invest_realestate" min="0" max="100" value="0" oninput="validatePercentages('finance_invest')">%
              </div>
              <div class="percentage-item">
                <label>Cash/Savings:</label>
                <input type="number" name="finance_invest_cash" min="0" max="100" value="0" oninput="validatePercentages('finance_invest')">%
              </div>
            </div>
            <div class="percentage-error" id="finance_invest_error"></div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> I believe in:</label>
            <div class="radio-group">
              <label><input type="radio" name="finance_invest_style" value="active"> Actively managing investments (picking stocks, timing market)</label>
              <label><input type="radio" name="finance_invest_style" value="passive"> Passive index investing (set it and forget it)</label>
              <label><input type="radio" name="finance_invest_style" value="advisor"> Using professional financial advisors</label>
              <label><input type="radio" name="finance_invest_style" value="minimal"> Minimal investing (prioritize safety/savings)</label>
            </div>
          </div>

          <h3>E. Retirement & Long-Term Planning</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> At what age do you want to retire?</label>
            <input type="number" name="finance_retire_age" min="18" max="100" placeholder="Age">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What annual retirement income would you need to feel comfortable?</label>
            <input type="number" name="finance_retire_income" placeholder="$ per year" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Retirement planning should be:</label>
            <div class="radio-group">
              <label><input type="radio" name="finance_retire_priority" value="top"> Top priority now (maximize savings even if less enjoyment today)</label>
              <label><input type="radio" name="finance_retire_priority" value="balanced"> Balanced with present enjoyment (save adequately but live well now)</label>
              <label><input type="radio" name="finance_retire_priority" value="later"> Something to worry about later (prioritize present quality of life)</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How much should we be saving monthly for retirement?</label>
            <input type="number" name="finance_retire_monthly" placeholder="$ per month" min="0">
          </div>

          <h3>F. Spending Philosophy & Fun Money</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What percentage of income should go to: (must total 100%)</label>
            <div class="percentage-group">
              <div class="percentage-item">
                <label>Savings/Investments:</label>
                <input type="number" name="finance_split_savings" min="0" max="100" value="0" oninput="validatePercentages('finance_split')">%
              </div>
              <div class="percentage-item">
                <label>Necessities (housing, food, utilities):</label>
                <input type="number" name="finance_split_necessities" min="0" max="100" value="0" oninput="validatePercentages('finance_split')">%
              </div>
              <div class="percentage-item">
                <label>Fun/Discretionary:</label>
                <input type="number" name="finance_split_fun" min="0" max="100" value="0" oninput="validatePercentages('finance_split')">%
              </div>
            </div>
            <div class="percentage-error" id="finance_split_error"></div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Each partner should have how much individual "no questions asked" fun money per month?</label>
            <input type="number" name="finance_fun_money" placeholder="$ per month per person" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rank in order of importance (1=most important, 3=least important):</label>
            <div style="margin-top: 10px;">
              <div style="margin-bottom: 10px;">
                <label style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="finance_rank_security" min="1" max="3" style="width: 60px;">
                  <span>Financial security</span>
                </label>
              </div>
              <div style="margin-bottom: 10px;">
                <label style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="finance_rank_experiences" min="1" max="3" style="width: 60px;">
                  <span>Life experiences (travel, events, activities)</span>
                </label>
              </div>
              <div style="margin-bottom: 10px;">
                <label style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="finance_rank_possessions" min="1" max="3" style="width: 60px;">
                  <span>Material possessions (nice home, car, clothes, gadgets)</span>
                </label>
              </div>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What do you think YOUR PARTNER would rank as most important?</label>
            <div class="radio-group">
              <label><input type="radio" name="finance_partner_priority" value="security"> Financial security</label>
              <label><input type="radio" name="finance_partner_priority" value="experiences"> Life experiences</label>
              <label><input type="radio" name="finance_partner_priority" value="possessions"> Material possessions</label>
            </div>
          </div>

          <h3>G. Extended Family & Obligations</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What financial obligations do you expect toward your parents/family?</label>
            <textarea name="finance_family_obligations" placeholder="Describe any expected financial support or obligations"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How much would you be comfortable loaning/giving to family members without consulting partner?</label>
            <input type="number" name="finance_family_gift_no_consult" placeholder="$" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How much would you be comfortable loaning/giving to family members WITH partner discussion?</label>
            <input type="number" name="finance_family_gift_with_consult" placeholder="$" min="0">
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Should we financially support adult children beyond age:</label>
            <div style="margin-top: 10px; display: flex; gap: 20px; align-items: center;">
              <label style="display: flex; align-items: center; gap: 10px;">
                Age: <input type="number" name="finance_support_age" min="0" max="50" style="width: 80px;">
              </label>
              <label style="display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" name="finance_support_na"> N/A (no children / no support planned)
              </label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How should we handle inheritance from our parents?</label>
            <div class="radio-group">
              <label><input type="radio" name="finance_inheritance" value="combine"> Combine with joint finances</label>
              <label><input type="radio" name="finance_inheritance" value="keep_separate"> Keep separate as individual assets</label>
              <label><input type="radio" name="finance_inheritance" value="partial"> Partially combine (<input type="number" name="finance_inheritance_percent" min="0" max="100" style="width: 60px; display:inline;">%)</label>
              <label><input type="radio" name="finance_inheritance" value="discuss_later"> Discuss when the time comes</label>
              <label><input type="radio" name="finance_inheritance" value="other"> Other: <input type="text" name="finance_inheritance_other" style="display:inline; width:200px;"></label>
            </div>
          </div>

          <h3>H. Major Purchase Philosophy</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How important is it to own your home vs. rent?</label>
            <div class="range-container">
              <input type="range" name="finance_own_vs_rent" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Renting is fine/preferred</span>
              <span>10 - Owning is essential</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> New cars or used cars?</label>
            <div class="radio-group">
              <label><input type="radio" name="finance_car_preference" value="new"> New cars (worth it for warranty/reliability)</label>
              <label><input type="radio" name="finance_car_preference" value="preowned"> Certified pre-owned (best value)</label>
              <label><input type="radio" name="finance_car_preference" value="used"> Used cars (maximize savings)</label>
              <label><input type="radio" name="finance_car_preference" value="case_by_case"> Don't care, case-by-case</label>
            </div>
            <textarea name="finance_car_explanation" placeholder="Optional explanation" style="margin-top: 10px;"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your tolerance for each type of debt:</label>
            
            <div style="margin-top: 15px; padding: 15px; background: #f8f9ff; border-radius: 8px;">
              <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 10px;"><strong>Credit card debt:</strong></label>
                <div class="range-container">
                  <input type="range" name="finance_debt_credit_card" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
                  <span class="range-value">5</span>
                </div>
                <div class="range-labels">
                  <span>1 - Never acceptable</span>
                  <span>10 - Comfortable carrying balance</span>
                </div>
              </div>

              <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 10px;"><strong>Car loans:</strong></label>
                <div class="range-container">
                  <input type="range" name="finance_debt_car" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
                  <span class="range-value">5</span>
                </div>
                <div class="range-labels">
                  <span>1 - Always pay cash</span>
                  <span>10 - Always finance</span>
                </div>
              </div>

              <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 10px;"><strong>Mortgage debt:</strong></label>
                <div class="range-container">
                  <input type="range" name="finance_debt_mortgage" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
                  <span class="range-value">5</span>
                </div>
                <div class="range-labels">
                  <span>1 - Pay off ASAP</span>
                  <span>10 - Leverage as investment tool</span>
                </div>
              </div>

              <div>
                <label style="display: block; margin-bottom: 10px;"><strong>Investment loans (margin, business loans):</strong></label>
                <div class="range-container">
                  <input type="range" name="finance_debt_investment" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
                  <span class="range-value">5</span>
                </div>
                <div class="range-labels">
                  <span>1 - Never</span>
                  <span>10 - Smart leverage</span>
                </div>
              </div>
            </div>
          </div>

          <h3>I. Values & Charitable Giving</h3>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What percentage of income should go to charitable giving/tithing?</label>
            <div style="margin-top: 10px; display: flex; gap: 20px; align-items: center;">
              <label style="display: flex; align-items: center; gap: 10px;">
                <input type="number" name="finance_charity_percent" min="0" max="100" style="width: 80px;">%
              </label>
              <label style="display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" name="finance_charity_na"> N/A / None planned
              </label>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Describe your philosophy on financial generosity:</label>
            <textarea name="finance_generosity_philosophy" placeholder="What does financial generosity mean to you?"></textarea>
          </div>

          <h3>J. Financial Goals & Partner Awareness</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Personal financial goal (1-Year):</label>
            <textarea name="finance_personal_goal_1yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Personal financial goal (5-Year):</label>
            <textarea name="finance_personal_goal_5yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Couple financial goal (1-Year):</label>
            <textarea name="finance_couple_goal_1yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Couple financial goal (5-Year):</label>
            <textarea name="finance_couple_goal_5yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Top 3 obstacles to financial goals:</label>
            <div style="margin-top: 10px;">
              <input type="text" name="finance_obstacle_1" placeholder="Obstacle 1" style="width: 100%; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
              <input type="text" name="finance_obstacle_2" placeholder="Obstacle 2" style="width: 100%; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
              <input type="text" name="finance_obstacle_3" placeholder="Obstacle 3" style="width: 100%; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How satisfied do you think YOUR PARTNER is with our financial situation?</label>
            <div class="range-container">
              <input type="range" name="finance_partner_satisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What do you think YOUR PARTNER'S biggest financial concern is?</label>
            <textarea name="finance_partner_concern"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your alignment as a couple on financial matters (1=major misalignment, 10=perfectly aligned)</label>
            <div class="range-container">
              <input type="range" name="finance_couple_alignment" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('domain3')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('domain5')">Next: Domain 5 ‚Üí</button>
          </div>
        </section>

                <!-- DOMAIN 5: Relationships and Social Life -->
        <section id="domain5" class="section hidden">
          <h2>Domain 5: Relationships and Social Life</h2>
          
          <div class="domain-intro">
            This domain covers friendships, family relationships, social activities, time together vs. apart, extended family involvement, and social lifestyle preferences.
          </div>

          <h3>A. Current State (Individual)</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your satisfaction with amount of quality time together as a couple:</label>
            <div class="range-container">
              <input type="range" name="social_couple_time" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Nowhere Near Enough</span>
              <span>10 - Perfect Amount</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your satisfaction with amount of individual/alone time:</label>
            <div class="range-container">
              <input type="range" name="social_alone_time" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Nowhere Near Enough</span>
              <span>10 - Perfect Amount</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Rate your satisfaction with your friendships and social connections:</label>
            <div class="range-container">
              <input type="range" name="social_friendships" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> How much effort do you invest in maintaining friendships?</label>
            <div class="range-container">
              <input type="range" name="social_friendship_effort" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How often do you need social activities / time with friends?</label>
            <div class="radio-group">
              <label><input type="radio" name="social_frequency" value="multiple"> Multiple times per week</label>
              <label><input type="radio" name="social_frequency" value="weekly"> Once per week</label>
              <label><input type="radio" name="social_frequency" value="2to3"> 2-3 times per month</label>
              <label><input type="radio" name="social_frequency" value="monthly"> Once per month</label>
              <label><input type="radio" name="social_frequency" value="rarely"> Rarely / I'm an introvert</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How involved should extended family be in our lives?</label>
            <div class="range-container">
              <input type="range" name="social_family_involvement" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Minimal Contact</span>
              <span>10 - Very Integrated/Frequent</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Current pain points in relationships/social domain:</label>
            <textarea name="social_frustrations"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Recent wins in relationships/social domain:</label>
            <textarea name="social_wins"></textarea>
          </div>

          <h3>B. Current State (Partner Awareness)</h3>

          <div class="prediction-note">
            üí° Predicting your partner's social and relationship needs
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How satisfied do you think YOUR PARTNER is with the amount of quality couple time?</label>
            <div class="range-container">
              <input type="range" name="social_partner_couple_time" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How satisfied do you think YOUR PARTNER is with their amount of alone time?</label>
            <div class="range-container">
              <input type="range" name="social_partner_alone_time" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What do you think your partner would say is their biggest relationship/social frustration?</label>
            <textarea name="social_partner_frustration"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your alignment on social lifestyle preferences:</label>
            <div class="range-container">
              <input type="range" name="social_alignment" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <h3>C. Future Vision</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How should we balance couple time, individual time, and social time in the next year?</label>
            <textarea name="social_balance"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What boundaries do we need with extended family?</label>
            <textarea name="social_family_boundaries"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Personal relationship goal (1-Year):</label>
            <textarea name="social_personal_1yr" placeholder="e.g., deepen friendships, establish boundaries, reconnect with old friends"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Couple relationship goal (1-Year):</label>
            <textarea name="social_couple_1yr" placeholder="e.g., weekly date nights, annual trips, establish traditions"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Couple relationship goal (5-Year):</label>
            <textarea name="social_couple_5yr"></textarea>
          </div>

          <h3>D. Obstacles & Resources</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What support do you need from your partner in this domain?</label>
            <textarea name="social_partner_support"></textarea>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('domain4')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('domain6')">Next: Domain 6 ‚Üí</button>
          </div>
        </section>

        <!-- DOMAIN 6: Spiritual and Intellectual Life -->
        <section id="domain6" class="section hidden">
          <h2>Domain 6: Spiritual and Intellectual Life</h2>
          
          <div class="domain-intro">
            This domain covers religious/spiritual beliefs, personal growth, learning, values, ethics, meaning/purpose, cultural identity, and intellectual engagement.
          </div>

          <h3>A. Current State (Individual)</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your satisfaction with your spiritual/religious life:</label>
            <div class="range-container">
              <input type="range" name="spiritual_satisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Very Dissatisfied</span>
              <span>10 - Very Satisfied</span>
            </div>
            <label style="margin-top: 10px;"><input type="checkbox" name="spiritual_na"> N/A (not applicable to me)</label>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Rate your satisfaction with your intellectual growth and learning:</label>
            <div class="range-container">
              <input type="range" name="spiritual_intellectual" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> How much effort do you invest in personal growth, learning, or spiritual practice?</label>
            <div class="range-container">
              <input type="range" name="spiritual_effort" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How important is religious/spiritual practice to you?</label>
            <div class="range-container">
              <input type="range" name="spiritual_importance" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Not Important</span>
              <span>10 - Central to My Identity</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How important is it that your partner shares your religious/spiritual beliefs?</label>
            <div class="range-container">
              <input type="range" name="spiritual_partner_sharing" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Not Important</span>
              <span>10 - Absolutely Essential</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> If you have/plan to have children, how should we raise them regarding religion/spirituality?</label>
            <textarea name="spiritual_children"></textarea>
            <label style="margin-top: 10px;"><input type="checkbox" name="spiritual_children_na"> N/A (no children planned)</label>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What are your core values? (List top 3-5)</label>
            <div style="margin-top: 10px;">
              <input type="text" name="spiritual_value1" placeholder="Value 1 (e.g., integrity, family, growth)" style="margin-bottom: 10px;">
              <input type="text" name="spiritual_value2" placeholder="Value 2" style="margin-bottom: 10px;">
              <input type="text" name="spiritual_value3" placeholder="Value 3" style="margin-bottom: 10px;">
              <input type="text" name="spiritual_value4" placeholder="Value 4 (optional)" style="margin-bottom: 10px;">
              <input type="text" name="spiritual_value5" placeholder="Value 5 (optional)">
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Which values are non-negotiable for you (i.e., dealbreakers if violated)?</label>
            <textarea name="spiritual_dealbreaker_values"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> What gives your life meaning and purpose?</label>
            <textarea name="spiritual_meaning"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Current frustrations in spiritual/intellectual domain:</label>
            <textarea name="spiritual_frustrations"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Recent wins in spiritual/intellectual domain:</label>
            <textarea name="spiritual_wins"></textarea>
          </div>

          <h3>B. Current State (Partner Awareness)</h3>

          <div class="prediction-note">
            üí° Predicting your partner's values and spiritual/intellectual life
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How satisfied do you think YOUR PARTNER is with their spiritual/intellectual life?</label>
            <div class="range-container">
              <input type="range" name="spiritual_partner_satisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What do you think YOUR PARTNER'S top 3 core values are?</label>
            <div style="margin-top: 10px;">
              <input type="text" name="spiritual_partner_value1" placeholder="Partner's Value 1" style="margin-bottom: 10px;">
              <input type="text" name="spiritual_partner_value2" placeholder="Partner's Value 2" style="margin-bottom: 10px;">
              <input type="text" name="spiritual_partner_value3" placeholder="Partner's Value 3">
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your alignment on core values and life philosophy:</label>
            <div class="range-container">
              <input type="range" name="spiritual_alignment" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <h3>C. Future Vision</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Personal spiritual/intellectual goal (1-Year):</label>
            <textarea name="spiritual_personal_1yr"></textarea>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Personal spiritual/intellectual goal (5-Year):</label>
            <textarea name="spiritual_personal_5yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> As a couple, what shared meaning or purpose should we cultivate in the next 1-5 years?</label>
            <textarea name="spiritual_couple_meaning"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Couple goal for this domain (1-Year):</label>
            <textarea name="spiritual_couple_1yr"></textarea>
          </div>

          <h3>D. Obstacles & Resources</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What support do you need from your partner in this domain?</label>
            <textarea name="spiritual_partner_support"></textarea>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('domain5')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('cross_domain')">Next: Integration ‚Üí</button>
          </div>
        </section>


        <!-- COMPLETION SCREEN -->
        <section id="completion" class="section hidden">
          <div class="completion-screen">
            <h2>‚úÖ Questionnaire Complete!</h2>
            <p>Great work! You've completed your individual assessment.</p>
            
            <div style="background: #f8f9ff; padding: 20px; border-radius: 8px; margin: 30px 0; text-align: left;">
              <h3 style="margin-top: 0;">Next Steps:</h3>
              <ol style="margin-left: 20px;">
                <li><strong>Export your responses</strong> as JSON (saves all your answers)</li>
                <li><strong>Your partner completes</strong> their questionnaire independently</li>
                <li><strong>Schedule your joint planning session</strong> (recommend 3-4 hours)</li>
                <li><strong>Load both JSON files</strong> in the Comparison Tool (coming soon)</li>
                <li><strong>Review the Alignment Dashboard</strong> together</li>
                <li><strong>Follow the Discussion Guide</strong> for your meeting</li>
              </ol>
            </div>

            <div class="completion-actions">
              <button type="button" class="btn-export" onclick="exportJSON()">üì• Export My Responses (JSON)</button>
              <button type="button" class="btn-print" onclick="printFilled()">üñ®Ô∏è Print Completed Form</button>
              <button type="button" class="btn-print" onclick="printBlank()">üìÑ Print Blank Form</button>
              <button type="button" class="btn-next" onclick="window.open('discussion-guide.html', '_blank')">üìã View Discussion Guide</button>
            </div>
          </div>
          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> How satisfied do you think YOUR PARTNER is with our financial situation?</label>
            <div class="range-container">
              <input type="range" name="finance_partner_satisfaction" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> What do you think YOUR PARTNER'S biggest financial concern is?</label>
            <textarea name="finance_partner_concern"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rate your alignment as a couple on financial matters:</label>
            <div class="range-container">
              <input type="range" name="finance_alignment" min="1" max="10" value="5" oninput="updateRangeDisplay(this)">
              <span class="range-value">5</span>
            </div>
            <div class="range-labels">
              <span>1 - Major Misalignment</span>
              <span>10 - Perfectly Aligned</span>
            </div>
          </div>

          <h3>I. Financial Goals</h3>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Personal financial goal (1-Year):</label>
            <textarea name="finance_personal_1yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Personal financial goal (5-Year):</label>
            <textarea name="finance_personal_5yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Couple financial goal (1-Year):</label>
            <textarea name="finance_couple_1yr"></textarea>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Couple financial goal (5-Year):</label>
            <textarea name="finance_couple_5yr"></textarea>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('domain3')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('domain5')">Next: Domain 5 ‚Üí</button>
          </div>
        </section>


        <!-- CROSS-DOMAIN INTEGRATION -->
        <section id="cross_domain" class="section hidden">
          <h2>Cross-Domain Integration</h2>
          
          <div class="domain-intro">
            These questions help you see how the six domains relate to each other and identify patterns in your priorities and investments.
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rank the six domains in order of current importance to you (1=most important):</label>
            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
              <p style="margin-bottom: 10px; font-size: 14px; color: #666;">Drag to reorder or enter numbers 1-6</p>
              <div style="display: grid; gap: 10px;">
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_importance_mental" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Mental and Emotional Well-being</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_importance_physical" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Physical Health and Fitness</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_importance_career" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Professional Life and Career</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_importance_financial" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Financial Life and Material Well-being</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_importance_social" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Relationships and Social Life</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_importance_spiritual" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Spiritual and Intellectual Life</span>
                </div>
              </div>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Rank the six domains in order of where you currently invest the most time/energy (1=most time/energy):</label>
            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
              <div style="display: grid; gap: 10px;">
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_effort_mental" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Mental and Emotional Well-being</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_effort_physical" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Physical Health and Fitness</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_effort_career" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Professional Life and Career</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_effort_financial" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Financial Life and Material Well-being</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_effort_social" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Relationships and Social Life</span>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <input type="number" name="rank_effort_spiritual" min="1" max="6" placeholder="Rank" style="width: 60px;">
                  <span>Spiritual and Intellectual Life</span>
                </div>
              </div>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Which domain needs the most improvement in YOUR life?</label>
            <div class="radio-group">
              <label><input type="radio" name="needs_improvement_personal" value="mental"> Mental and Emotional</label>
              <label><input type="radio" name="needs_improvement_personal" value="physical"> Physical Health</label>
              <label><input type="radio" name="needs_improvement_personal" value="career"> Professional/Career</label>
              <label><input type="radio" name="needs_improvement_personal" value="financial"> Financial</label>
              <label><input type="radio" name="needs_improvement_personal" value="social"> Relationships/Social</label>
              <label><input type="radio" name="needs_improvement_personal" value="spiritual"> Spiritual/Intellectual</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Which domain needs the most improvement in OUR RELATIONSHIP?</label>
            <div class="radio-group">
              <label><input type="radio" name="needs_improvement_couple" value="mental"> Mental and Emotional</label>
              <label><input type="radio" name="needs_improvement_couple" value="physical"> Physical Health</label>
              <label><input type="radio" name="needs_improvement_couple" value="career"> Professional/Career</label>
              <label><input type="radio" name="needs_improvement_couple" value="financial"> Financial</label>
              <label><input type="radio" name="needs_improvement_couple" value="social"> Relationships/Social</label>
              <label><input type="radio" name="needs_improvement_couple" value="spiritual"> Spiritual/Intellectual</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> If you could only make significant progress in ONE domain this year, which would it be?</label>
            <div class="radio-group">
              <label><input type="radio" name="top_priority" value="mental"> Mental and Emotional</label>
              <label><input type="radio" name="top_priority" value="physical"> Physical Health</label>
              <label><input type="radio" name="top_priority" value="career"> Professional/Career</label>
              <label><input type="radio" name="top_priority" value="financial"> Financial</label>
              <label><input type="radio" name="top_priority" value="social"> Relationships/Social</label>
              <label><input type="radio" name="top_priority" value="spiritual"> Spiritual/Intellectual</label>
            </div>
          </div>

          <div class="question nice-to-have">
            <label><span class="label-tag nice-to-have">NTH</span> Which domain are you most satisfied with currently?</label>
            <div class="radio-group">
              <label><input type="radio" name="most_satisfied" value="mental"> Mental and Emotional</label>
              <label><input type="radio" name="most_satisfied" value="physical"> Physical Health</label>
              <label><input type="radio" name="most_satisfied" value="career"> Professional/Career</label>
              <label><input type="radio" name="most_satisfied" value="financial"> Financial</label>
              <label><input type="radio" name="most_satisfied" value="social"> Relationships/Social</label>
              <label><input type="radio" name="most_satisfied" value="spiritual"> Spiritual/Intellectual</label>
            </div>
          </div>

          <div class="question mandatory">
            <label><span class="label-tag mandatory">M</span> Is there significant misalignment between what you value (importance ranking) and where you invest effort?</label>
            <div class="radio-group">
              <label><input type="radio" name="value_effort_misalignment" value="yes_bothers"> Yes, and this bothers me</label>
              <label><input type="radio" name="value_effort_misalignment" value="yes_temporary"> Yes, but this is temporary / necessary for now</label>
              <label><input type="radio" name="value_effort_misalignment" value="no"> No, pretty well aligned</label>
            </div>
            <textarea name="value_effort_explanation" placeholder="Optional explanation" style="margin-top: 10px;"></textarea>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('domain6')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('goals')">Next: Goal Synthesis ‚Üí</button>
          </div>
        </section>

        <!-- GOAL SYNTHESIS SECTION -->
        <section id="goals" class="section hidden">
          <h2>Goal Synthesis & Action Planning</h2>
          
          <div class="domain-intro">
            Now that you've reflected on all six domains, it's time to synthesize your insights into concrete, actionable goals. Focus on quality over quantity - it's better to achieve 3 goals than to start 10 and abandon them.
          </div>

          <div class="alert">
            <strong>üìä Research Insight:</strong> People who write down specific goals with action steps are 42% more likely to achieve them than those who just think about what they want.
          </div>

          <h3>Top 3 Personal Goals (1-Year)</h3>

          <!-- Personal Goal 1 -->
          <div class="card" style="background: #fff; border: 2px solid #667eea; margin: 20px 0;">
            <h4 style="margin-top: 0; color: #667eea;">Personal Goal #1 (1-Year)</h4>
            
            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Goal Statement:</label>
              <textarea name="goal_personal1_1yr_statement" placeholder="What do you want to achieve?"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Why this matters to me:</label>
              <textarea name="goal_personal1_1yr_why"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Specific Measurable Outcome (What does success look like?):</label>
              <textarea name="goal_personal1_1yr_outcome"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Next Steps/Action Items:</label>
              <textarea name="goal_personal1_1yr_actions" placeholder="What specific actions will you take?"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Timeline/Milestones:</label>
              <textarea name="goal_personal1_1yr_milestones" placeholder="What are your key milestones?"></textarea>
            </div>
          </div>

          <!-- Personal Goal 2 -->
          <div class="card" style="background: #fff; border: 2px solid #667eea; margin: 20px 0;">
            <h4 style="margin-top: 0; color: #667eea;">Personal Goal #2 (1-Year)</h4>
            
            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Goal Statement:</label>
              <textarea name="goal_personal2_1yr_statement" placeholder="What do you want to achieve?"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Why this matters to me:</label>
              <textarea name="goal_personal2_1yr_why"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Specific Measurable Outcome:</label>
              <textarea name="goal_personal2_1yr_outcome"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Next Steps/Action Items:</label>
              <textarea name="goal_personal2_1yr_actions"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Timeline/Milestones:</label>
              <textarea name="goal_personal2_1yr_milestones"></textarea>
            </div>
          </div>

          <!-- Personal Goal 3 -->
          <div class="card" style="background: #fff; border: 2px solid #667eea; margin: 20px 0;">
            <h4 style="margin-top: 0; color: #667eea;">Personal Goal #3 (1-Year)</h4>
            
            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Goal Statement:</label>
              <textarea name="goal_personal3_1yr_statement" placeholder="What do you want to achieve?"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Why this matters to me:</label>
              <textarea name="goal_personal3_1yr_why"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Specific Measurable Outcome:</label>
              <textarea name="goal_personal3_1yr_outcome"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Next Steps/Action Items:</label>
              <textarea name="goal_personal3_1yr_actions"></textarea>
            </div>

            <div class="question mandatory">
              <label><span class="label-tag mandatory">M</span> Timeline/Milestones:</label>
              <textarea name="goal_personal3_1yr_milestones"></textarea>
            </div>
          </div>

          <div class="section-nav">
            <button type="button" class="btn-prev" onclick="goToSection('domain6')">‚Üê Previous</button>
            <button type="button" class="btn-next" onclick="goToSection('completion')">Complete Form ‚Üí</button>
          </div>
        </section>

        <!-- COMPLETION SECTION -->
        <section id="completion" class="section hidden">
          <div class="completion-screen">
            <h2>‚úì Planning Session Complete!</h2>
            <p>Thank you for completing your annual planning questionnaire.</p>
            <p>Next Steps:</p>
            <ol style="text-align: left; display: inline-block; margin: 20px 0;">
              <li>Share your responses with your partner</li>
              <li>Schedule your joint planning session</li>
              <li>Export this form for your records</li>
            </ol>
            <div class="completion-actions">
              <button type="button" class="btn-export" onclick="exportJSON()">üì• Export as JSON</button>
              <button type="button" class="btn-print" onclick="printFilled()">üñ®Ô∏è Print Form</button>
              <button type="button" class="btn-export" onclick="resetForm()">üîÑ Start Over</button>
            </div>
          </div>
        </section>

      </form>
    </main>
  </div>

  <script>
    // Initialize the form on page load
    document.addEventListener('DOMContentLoaded', function() {
      loadProgress();
      updateProgressBar();
    });

    // Navigate between sections
    function goToSection(sectionId) {
      // Hide all sections
      const sections = document.querySelectorAll('.section');
      sections.forEach(section => section.classList.add('hidden'));
      
      // Show the target section
      const targetSection = document.getElementById(sectionId);
      if (targetSection) {
        targetSection.classList.remove('hidden');
        window.scrollTo(0, 0);
        updateProgressBar();
      }
    }

    // Update progress bar based on filled fields across entire form
    function updateProgressBar() {
      const form = document.getElementById('planningForm');
      
      // Get all form elements
      const allInputs = form.querySelectorAll('input, textarea, select');
      let totalFields = 0;
      let filledFields = 0;
      
      // Track which radio/checkbox groups we've already counted
      const radioCheckboxGroups = new Set();
      
      allInputs.forEach(input => {
        // Skip hidden inputs and file inputs
        if (input.type === 'hidden' || input.type === 'file') {
          return;
        }
        
        // Handle radio buttons and checkboxes - count the group once
        if (input.type === 'radio' || input.type === 'checkbox') {
          const groupKey = input.name;
          
          // Skip if we've already counted this group
          if (radioCheckboxGroups.has(groupKey)) {
            return;
          }
          
          radioCheckboxGroups.add(groupKey);
          totalFields++;
          
          // Check if any radio/checkbox in this group is checked
          const groupElements = form.querySelectorAll(`[name="${groupKey}"]`);
          let isChecked = false;
          groupElements.forEach(el => {
            if (el.checked) {
              isChecked = true;
            }
          });
          
          if (isChecked) {
            filledFields++;
          }
        } else {
          // For text inputs, textareas, number inputs, range inputs, etc.
          totalFields++;
          
          // Check if field has a value
          if (input.value && input.value.trim() !== '') {
            filledFields++;
          }
        }
      });
      
      // Calculate percentage
      const percentage = totalFields > 0 ? Math.round((filledFields / totalFields) * 100) : 0;
      
      // Update progress bar
      const progressBar = document.getElementById('progressBar');
      const progressText = document.getElementById('progressText');
      
      if (progressBar && progressText) {
        progressBar.style.width = percentage + '%';
        progressText.textContent = percentage + '% Complete';
      }
    }

    // Save progress to localStorage
    function saveProgress() {
      const form = document.getElementById('planningForm');
      const formData = new FormData(form);
      const data = {};
      
      formData.forEach((value, key) => {
        data[key] = value;
      });
      
      localStorage.setItem('planningFormData', JSON.stringify(data));
      localStorage.setItem('lastSaved', new Date().toLocaleString());
      
      // Show confirmation
      const lastSavedEl = document.getElementById('lastSaved');
      lastSavedEl.textContent = 'Last saved: ' + new Date().toLocaleString();
      
      alert('Progress saved successfully!');
    }

    // Load progress from localStorage
    function loadProgress() {
      const savedData = localStorage.getItem('planningFormData');
      if (savedData) {
        const data = JSON.parse(savedData);
        const form = document.getElementById('planningForm');
        
        Object.keys(data).forEach(key => {
          const field = form.querySelector('[name="' + key + '"]');
          if (field) {
            if (field.type === 'radio') {
              const radio = form.querySelector('[name="' + key + '"][value="' + data[key] + '"]');
              if (radio) radio.checked = true;
            } else if (field.type === 'checkbox') {
              const checkbox = form.querySelector('[name="' + key + '"][value="' + data[key] + '"]');
              if (checkbox) checkbox.checked = true;
            } else {
              field.value = data[key];
            }
          }
        });
        
        // Update last saved time
        const lastSaved = localStorage.getItem('lastSaved');
        if (lastSaved) {
          document.getElementById('lastSaved').textContent = 'Last saved: ' + lastSaved;
        }
      }
    }

    // Export form data as JSON
    function exportJSON() {
      const form = document.getElementById('planningForm');
      const formData = new FormData(form);
      const data = {};
      
      formData.forEach((value, key) => {
        if (data[key]) {
          // Handle multiple values for same name (checkboxes)
          if (Array.isArray(data[key])) {
            data[key].push(value);
          } else {
            data[key] = [data[key], value];
          }
        } else {
          data[key] = value;
        }
      });
      
      const jsonString = JSON.stringify(data, null, 2);
      const blob = new Blob([jsonString], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'planning-form-' + new Date().toISOString().split('T')[0] + '.json';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // Import form data from JSON
    function importJSON(file) {
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const data = JSON.parse(e.target.result);
          const form = document.getElementById('planningForm');
          
          Object.keys(data).forEach(key => {
            const field = form.querySelector('[name="' + key + '"]');
            if (field) {
              if (field.type === 'radio') {
                const radio = form.querySelector('[name="' + key + '"][value="' + data[key] + '"]');
                if (radio) radio.checked = true;
              } else if (field.type === 'checkbox') {
                const values = Array.isArray(data[key]) ? data[key] : [data[key]];
                values.forEach(val => {
                  const checkbox = form.querySelector('[name="' + key + '"][value="' + val + '"]');
                  if (checkbox) checkbox.checked = true;
                });
              } else {
                field.value = data[key];
              }
            }
          });
          
          updateProgressBar();
          alert('Form data imported successfully!');
        } catch (err) {
          alert('Error importing file: ' + err.message);
        }
      };
      reader.readAsText(file);
    }

    // Print filled form
    function printFilled() {
      updateProgressBar(); // Ensure progress is updated
      window.print();
    }

    // Print blank form (optional - just prints without data)
    function printBlank() {
      const form = document.getElementById('planningForm');
      const formData = new FormData(form);
      
      // Clear all form fields
      const inputs = form.querySelectorAll('input, textarea');
      inputs.forEach(input => {
        if (input.type === 'radio' || input.type === 'checkbox') {
          input.checked = false;
        } else {
          input.value = '';
        }
      });
      
      updateProgressBar();
      window.print();
      
      // Reload form data after printing
      loadProgress();
    }

    // Reset the form
    function resetForm() {
      if (confirm('Are you sure you want to reset the entire form? This cannot be undone.')) {
        localStorage.removeItem('planningFormData');
        localStorage.removeItem('lastSaved');
        document.getElementById('planningForm').reset();
        document.getElementById('lastSaved').textContent = '';
        updateProgressBar();
        goToSection('instructions');
      }
    }

    // Update range slider display value
    function updateRangeDisplay(input) {
      const valueSpan = input.nextElementSibling;
      if (valueSpan && valueSpan.classList.contains('range-value')) {
        valueSpan.textContent = input.value;
      }
      updateProgressBar();
    }

    // Validate that percentages sum to 100
    function validatePercentages(groupName) {
      const inputs = document.querySelectorAll('input[name^="' + groupName + '"]');
      let total = 0;
      
      inputs.forEach(input => {
        const value = parseInt(input.value) || 0;
        total += value;
      });
      
      const errorEl = document.getElementById(groupName + '_error');
      if (errorEl) {
        if (total !== 100 && total !== 0) {
          errorEl.textContent = 'Total must equal 100% (currently ' + total + '%)';
          errorEl.style.color = '#dc3545';
          errorEl.style.fontWeight = 'bold';
        } else {
          errorEl.textContent = '';
        }
      }
      
      updateProgressBar();
    }

    // Update progress whenever form changes
    document.addEventListener('change', updateProgressBar);
    document.addEventListener('input', updateProgressBar);
  </script>
</body>
</html>

